## Setup Kafka and Zookeeper docker images on 10.46.13.136 machine:

docker run -d --name=zookeeper1 -p 2181:2181 -e ZOOKEEPER_CLIENT_PORT=2181 confluentinc/cp-zookeeper:latest
docker run -d --name=kafka1 -p 9092:9092 -e KAFKA_ZOOKEEPER_CONNECT=10.46.13.136:2181 -e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://10.46.13.136:9092 -e KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1 confluentinc/cp-kafka:latest
 
sudo iptables -I INPUT -p tcp --dport 2181 -j ACCEPT
sudo iptables -I INPUT -p tcp --dport 9092 -j ACCEPT
 
 
Connection information for Kafka Tools 2.0.2
Zookeeper host: 10.46.13.136
Zookeeper port: 2181

##Test Zookeeper and Kafka install:
### Create Topic
docker run \
--rm confluentinc/cp-kafka:latest \
kafka-topics --create --topic foo --partitions 1 --replication-factor 1 \
--if-not-exists --zookeeper 10.46.13.136:2181;
 
 
### Describe Topic
docker run \
--rm \
confluentinc/cp-kafka:latest \
kafka-topics --describe --topic foo --zookeeper 10.46.13.136:2181;
 
### Send message to Topic
 
docker run \
--rm \
confluentinc/cp-kafka:latest \
bash -c "seq 42 | kafka-console-producer --request-required-acks 1 \
--broker-list 10.46.13.136:9092 --topic foo && echo 'Produced 42 messages.'";
 
### Consume Message from Topic
 
docker run \
--rm \
confluentinc/cp-kafka:latest \
kafka-console-consumer --bootstrap-server 10.46.13.136:9092 --topic foo --from-beginning --max-messages 42;


## Start Schema Registry
docker run -d \
--net=host \
--name=schema-registry1 \
-e SCHEMA_REGISTRY_KAFKASTORE_CONNECTION_URL=10.46.13.136:2181 \
-e SCHEMA_REGISTRY_HOST_NAME=10.46.13.136 \
-e SCHEMA_REGISTRY_LISTENERS=http://10.46.13.136:8081 \
confluentinc/cp-schema-registry:latest;
docker run -it --net=host --rm confluentinc/cp-schema-registry:latest bash

## Start Control Center

docker run -d \
--name=control-center1 \
--net=host \
--ulimit nofile=16384:16384 \
-p 9021:9021 \
-v /tmp/control-center/data:/var/lib/confluent-control-center \
-e CONTROL_CENTER_ZOOKEEPER_CONNECT=10.46.13.136:2181 \
-e CONTROL_CENTER_BOOTSTRAP_SERVERS=10.46.13.136:9092 \
-e CONTROL_CENTER_REPLICATION_FACTOR=1 \
-e CONTROL_CENTER_MONITORING_INTERCEPTOR_TOPIC_PARTITIONS=1 \
-e CONTROL_CENTER_INTERNAL_TOPICS_PARTITIONS=1 \
-e CONTROL_CENTER_STREAMS_NUM_STREAM_THREADS=2 \
-e CONTROL_CENTER_CONNECT_CLUSTER=http://10.46.13.136:8082 \
confluentinc/cp-enterprise-control-center:latest
